<Window x:Class="FEZRepacker.GUI.Main"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:FEZRepacker.GUI"
        mc:Ignorable="d"
        Title="FEZ Repacker" 
        Width="800"
        Height="450"
        MinWidth="400"
        MinHeight="200"
        Style="{DynamicResource CustomWindowStyle}"
        Icon="pack://application:,,,/Resources/icon.ico"
>
    <Window.CommandBindings>
        <CommandBinding Command="{x:Static local:Commands.CreateEmpty}" Executed="NewPackage"/>
        <CommandBinding Command="{x:Static local:Commands.Open}" Executed="OpenPackage"/>
        <CommandBinding Command="{x:Static local:Commands.ImportDirectory}" Executed="ImportDirectory"/>
        <CommandBinding Command="{x:Static local:Commands.Save}" Executed="SavePackage"/>
        <CommandBinding Command="{x:Static local:Commands.SaveAs}" Executed="SavePackageAs"/>
        <CommandBinding Command="{x:Static local:Commands.Export}" Executed="Export"/>
        <CommandBinding Command="{x:Static local:Commands.Exit}" Executed="Exit"/>

        <CommandBinding Command="{x:Static local:Commands.AddFiles}" Executed="AddFiles"/>
        <CommandBinding Command="{x:Static local:Commands.AddDirectory}" Executed="AddDirectory"/>
        <CommandBinding Command="{x:Static local:Commands.Undo}" Executed="Undo"/>
        <CommandBinding Command="{x:Static local:Commands.Redo}" Executed="Redo"/>
        <CommandBinding Command="{x:Static local:Commands.SelectAll}" Executed="SelectAll"/>
        <CommandBinding Command="{x:Static local:Commands.DeleteSelected}" Executed="DeleteSelected"/>
        <CommandBinding Command="{x:Static local:Commands.Preferences}" Executed="Preferences"/>

        <CommandBinding Command="{x:Static local:Commands.ReportIssue}" Executed="ReportIssue"/>
        <CommandBinding Command="{x:Static local:Commands.CheckUpdates}" Executed="CheckUpdates"/>
        <CommandBinding Command="{x:Static local:Commands.OpenDocs}" Executed="OpenDocs"/>
        <CommandBinding Command="{x:Static local:Commands.JoinDiscord}" Executed="JoinDiscord"/>
        <CommandBinding Command="{x:Static local:Commands.ShowAbout}" Executed="ShowAbout"/>
    </Window.CommandBindings>

    <DockPanel>
        <Menu DockPanel.Dock="Top" Margin="3px">
            <MenuItem Header="_File">
                <MenuItem Command="{x:Static local:Commands.CreateEmpty}"/>
                <MenuItem Command="{x:Static local:Commands.Open}"/>
                <MenuItem Command="{x:Static local:Commands.ImportDirectory}"/>
                <MenuItem Header="Open Recent..." IsEnabled="False"/>
                <Separator/>
                <MenuItem Command="{x:Static local:Commands.Save}"/>
                <MenuItem Command="{x:Static local:Commands.SaveAs}"/>
                <MenuItem Command="{x:Static local:Commands.Export}"/>
                <Separator/>
                <MenuItem Command="{x:Static local:Commands.Exit}"/>
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Command="{x:Static local:Commands.AddFiles}"/>
                <MenuItem Command="{x:Static local:Commands.AddDirectory}"/>
                <Separator/>
                <MenuItem Command="{x:Static local:Commands.Undo}"/>
                <MenuItem Command="{x:Static local:Commands.Redo}"/>
                <Separator/>
                <MenuItem Command="{x:Static local:Commands.SelectAll}"/>
                <MenuItem Command="{x:Static local:Commands.DeleteSelected}"/>
                <Separator/>
                <MenuItem Command="{x:Static local:Commands.Preferences}"/>
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Command="{x:Static local:Commands.ReportIssue}"/>
                <MenuItem Command="{x:Static local:Commands.CheckUpdates}"/>
                <Separator/>
                <MenuItem Command="{x:Static local:Commands.OpenDocs}"/>
                <MenuItem Command="{x:Static local:Commands.JoinDiscord}"/>
                <MenuItem Command="{x:Static local:Commands.ShowAbout}"/>
            </MenuItem>
        </Menu>
        <Grid Margin="5px">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250px" MinWidth="100px"/>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border BorderBrush="#2fff" BorderThickness="1px"
                    Grid.Row="0" Grid.Column="0" 
                    HorizontalAlignment="Stretch" 
                    VerticalAlignment="Stretch" >
                <Border.Resources>
                    <Style x:Key="FileButton" TargetType="{x:Type Button}">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Height" Value="26px"/>
                        <Setter Property="BorderThickness" Value="0px"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                        <DockPanel Margin="21px 0 0 0">
                                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                                        </DockPanel>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsDefaulted" Value="true">
                                            <Setter Property="BorderBrush" Value="{StaticResource ControlMouseOverBorderBrush}"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ControlMouseOverBackground}"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ControlSelectedBackground}"/>
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter Property="Background" Value="{StaticResource ControlBrightDefaultBackground}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>

                    <Style x:Key="DirectoryFileButton" TargetType="{x:Type Button}" BasedOn="{StaticResource FileButton}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                        <DockPanel>
                                            <Grid Margin="8px">
                                                <Line X1="1" Y1="1" X2="5" Y2="5" Stroke="#5fff" StrokeThickness="1"/>
                                                <Line X1="1" Y1="9" X2="5" Y2="5" Stroke="#5fff" StrokeThickness="1"/>
                                            </Grid>
                                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                                        </DockPanel>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsDefaulted" Value="true">
                                            <Setter Property="BorderBrush" Value="{StaticResource ControlMouseOverBorderBrush}"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ControlMouseOverBackground}"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ControlSelectedBackground}"/>
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter Property="Background" Value="{StaticResource ControlBrightDefaultBackground}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>

                    <Style x:Key="OpenDirectoryFileButton" TargetType="{x:Type Button}" BasedOn="{StaticResource FileButton}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                        <DockPanel>
                                            <Grid Margin="6px">
                                                <Line X1="1" Y1="5" X2="5" Y2="9" Stroke="#8fff" StrokeThickness="1"/>
                                                <Line X1="9" Y1="5" X2="5" Y2="9" Stroke="#8fff" StrokeThickness="1"/>
                                            </Grid>
                                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                                        </DockPanel>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsDefaulted" Value="true">
                                            <Setter Property="BorderBrush" Value="{StaticResource ControlMouseOverBorderBrush}"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ControlMouseOverBackground}"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="true">
                                            <Setter Property="Background" Value="{StaticResource ControlSelectedBackground}"/>
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter Property="Background" Value="{StaticResource ControlBrightDefaultBackground}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Border.Resources>

                <ScrollViewer>
                    <StackPanel x:Name="fileList">
                        <Button Style="{DynamicResource DirectoryFileButton}" Content="untitled"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <GridSplitter Grid.Row="0" Grid.Column="1" Margin="2,0,2,0"
                  Width="3" 
                  VerticalAlignment="Stretch" 
                  HorizontalAlignment="Center" />

            <Border BorderBrush="#2fff" BorderThickness="1px"
                    Grid.Row="0" Grid.Column="2" 
                    HorizontalAlignment="Stretch" 
                    VerticalAlignment="Stretch" >
                <StackPanel></StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>
